<a id="chinese"></a>
[ğŸ‡¨ğŸ‡³ ä¸­æ–‡æ–‡æ¡£](#chinese) | [ğŸ‡ºğŸ‡¸ English](#english)


> å…·ä½“é…ç½®ç»†èŠ‚è¿˜è¯·è§READMEæ–‡æ¡£ä¸­çš„Youtubeè§†é¢‘ï¼Œåšä¸»æœ‰ç©ºä¼šç›´æ¥é…ç½®å¥½æŠŠå›ºä»¶å‘å‡ºæ¥çš„ã€‚

### ç§‘å­¦ä¸Šç½‘é…ç½®
> è¯´å®è¯ï¼ŒæŠ˜è…¾è½¯è·¯ç”±åˆ°ç°åœ¨ï¼Œä¸å°±æ˜¯ä¸ºäº†è¿™ä¸€åˆ»å˜›ï¼Ÿ
> å½“ä½ çœŸæ­£é…ç½®å¥½ç§‘å­¦ä¸Šç½‘ï¼Œçœ‹ç€å…¨å±‹è®¾å¤‡éƒ½èƒ½è‡ªç”±ã€å¿«é€Ÿåœ°è®¿é—®å¤–ç½‘ï¼Œé‚£ä¸€ç¬é—´çš„ç•…å¿«ï¼Œç»å¯¹æ˜¯æ‰€æœ‰æŠ˜è…¾çš„æ„ä¹‰æ‰€åœ¨ã€‚

> æ¥ä¸‹æ¥ï¼Œå°±è®©æˆ‘ä»¬é…ç½®openclashï¼Œçœ‹çœ‹æ€ä¹ˆè®© OpenWrt çš„è½¯è·¯ç”±çœŸæ­£â€œé£â€èµ·æ¥ã€‚

1. å®‰è£…ç§‘å­¦ä¸Šç½‘æ’ä»¶Openclashç­‰
æ ¹æ®ä¸ªäººå–œå¥½ä¸‹è½½æ·»åŠ å³å¯ï¼ˆä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼ï¼‰
- Openclash ï¼ˆå¼ºçƒˆæ¨èï¼Œç”¨çš„äººæœ€å¤šï¼Œæœ¬æ–‡æ•™ç¨‹ä¹Ÿæ˜¯åŸºäºæ­¤ï¼‰
- passWall
- ç•¥

>å®‰è£…å¥½ OpenClash æ’ä»¶åï¼Œå…ˆçœ‹ä¸€éè¿™æ®µè§†é¢‘ï¼ŒæŒ‰æ­¥éª¤å®ŒæˆåŸºç¡€é…ç½®å³å¯ï¼š
é“¾æ¥ï¼šhttps://www.youtube.com/watch?v=1U9xkpexHOE

ä¸è§†é¢‘ä¸åŒçš„æ˜¯ï¼Œè§†é¢‘é‡Œçš„ `config.yaml` åœ¨å®é™…ä½¿ç”¨ä¸­ä¼šå‡ºç°ä¸¤ä¸ªé—®é¢˜ï¼šä¸€æ˜¯ `LinkedIn`æ— æ³•æ­£å¸¸è®¿é—®ï¼ŒäºŒæ˜¯åƒ IEEE è¿™ç±»`å­¦æœ¯ç½‘ç«™`æ— æ³•æ­£ç¡®è¯†åˆ«å­¦æœ¯ç½‘ç»œçš„ IPï¼Œå¯¼è‡´éœ€è¦é¢‘ç¹åˆ‡æ¢ç½‘ç»œæ‰èƒ½ä¸‹è½½æ–‡çŒ®ã€‚æœ¬æ–‡æä¾›çš„é…ç½®æ–¹æ¡ˆé’ˆå¯¹è§„åˆ™ä¸ DNS åˆ†æµåšäº†è°ƒæ•´ï¼Œè§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼Œå¹¶ç»™å‡ºå¯å¤ç°çš„ç¤ºä¾‹ä¸éªŒè¯æ­¥éª¤ã€‚

é…ç½®æ–‡ä»¶é€‰æ‹©ï¼ˆå‡åœ¨ä»“åº“æ ¹ç›®å½•ï¼‰ï¼š
- `config.yaml`ï¼šåŸºç¡€ç‰ˆï¼ŒæŒ‰éœ€è‡ªè¡Œæ‰©å±•
- `config_linkedin.yaml`ï¼šLinkedIn ä¿®å¤ç‰ˆï¼ˆDNS/è§„åˆ™æ’é™¤å†²çªï¼‰
- `config_linkedin_auto.yaml`ï¼š**æ™ºèƒ½åˆ‡æ¢ç‰ˆï¼ˆæ¨èï¼‰** - åœ¨ LinkedIn ä¿®å¤ç‰ˆåŸºç¡€ä¸Šï¼Œä½¿ç”¨è‡ªåŠ¨æ•…éšœåˆ‡æ¢ç­–ç•¥
- `config_linkedin_auto_ssh22_redir.yaml`ï¼šGitHub SSH 22 ç«¯å£é—®é¢˜ä¿®å¤ç‰ˆï¼ˆ`redir-host`/Redir + `DST-PORT,22,DIRECT`ï¼‰

æ¨èä½¿ç”¨ [config_linkedin_auto.yaml](../config_linkedin_auto.yaml) ä½œä¸ºé…ç½®æ–‡ä»¶ã€‚
è‹¥é‡åˆ° GitHub SSH 22 ç«¯å£æ¡æ‰‹è¢«æ–­å¼€ï¼Œå¯åˆ‡æ¢åˆ° `redir-host`ï¼ˆæˆ– Redirï¼‰å¹¶æ”¹ç”¨ [config_linkedin_auto_ssh22_redir.yaml](../config_linkedin_auto_ssh22_redir.yaml)ï¼Œå†å‚è€ƒ [GitHub SSH 22 ç«¯å£æ’éšœè®°å½•](./GitHub_SSH_22_Port_Blocking.md)ã€‚

### âš¡ è‡ªåŠ¨èŠ‚ç‚¹åˆ‡æ¢é…ç½®è¯´æ˜

**ä¸ºä»€ä¹ˆéœ€è¦è‡ªåŠ¨åˆ‡æ¢ï¼Ÿ**
- æœºåœºèŠ‚ç‚¹æœ‰æ—¶ä¼šå¤±æ•ˆæˆ–å˜æ…¢
- æ‰‹åŠ¨åˆ‡æ¢èŠ‚ç‚¹ä½“éªŒå·®ï¼Œå½±å“ä½¿ç”¨
- æ™ºèƒ½é…ç½®å¯ä»¥å®ç°æ— ç¼ä¸Šç½‘ä½“éªŒ

**config_linkedin_auto.yaml çš„ä¼˜åŠ¿**ï¼š

1. **è‡ªåŠ¨æµ‹é€Ÿé€‰æ‹©ï¼ˆurl-testï¼‰**
   - æ¯60ç§’è‡ªåŠ¨æµ‹è¯•æ‰€æœ‰èŠ‚ç‚¹å»¶è¿Ÿ
   - è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½çš„å¯ç”¨èŠ‚ç‚¹
   - å®¹å·®50msï¼šå»¶è¿Ÿæ³¢åŠ¨è¶…è¿‡50msç«‹å³åˆ‡æ¢

2. **æ•…éšœè½¬ç§»ï¼ˆfallbackï¼‰**
   - ä¸»èŠ‚ç‚¹å¤±è´¥è‡ªåŠ¨åˆ‡æ¢å¤‡ç”¨èŠ‚ç‚¹
   - å„åº”ç”¨åˆ†ç»„ç‹¬ç«‹é…ç½®ä¼˜å…ˆçº§
   - 180ç§’æ£€æµ‹é—´éš”ï¼Œå®¹å·®20ms

3. **åœ°åŒºè‡ªåŠ¨é€‰æ‹©ç»„**
   - â™»ï¸ é¦™æ¸¯è‡ªåŠ¨ã€æ—¥æœ¬è‡ªåŠ¨ã€ç‹®åŸè‡ªåŠ¨ã€ç¾å›½è‡ªåŠ¨
   - å„åœ°åŒºå†…è‡ªåŠ¨é€‰æ‹©æœ€å¿«èŠ‚ç‚¹
   - èŠ‚ç‚¹å¤±æ•ˆè‡ªåŠ¨å‰”é™¤

**å…³é”®å‚æ•°**ï¼š
```yaml
type: url-test         # è‡ªåŠ¨æµ‹é€Ÿé€‰æ‹©æœ€å¿«èŠ‚ç‚¹
type: fallback         # æ•…éšœè½¬ç§»ï¼ˆä¸»èŠ‚ç‚¹æŒ‚äº†åˆ‡å¤‡ç”¨ï¼‰
interval: 60           # æ¯60ç§’æµ‹è¯•ä¸€æ¬¡ï¼ˆé»˜è®¤180så¤ªæ…¢ï¼‰
tolerance: 50          # å»¶è¿Ÿå·®50mså°±åˆ‡æ¢ï¼ˆé»˜è®¤100mså¤ªå¤§ï¼‰
url: https://cp.cloudflare.com/generate_204  # æµ‹è¯•åœ°å€
```

**ä½¿ç”¨æ•ˆæœ**ï¼š
- âœ… èŠ‚ç‚¹å¤±æ•ˆ1åˆ†é’Ÿå†…è‡ªåŠ¨åˆ‡æ¢
- âœ… å»¶è¿Ÿæ³¢åŠ¨å¤§äº50msè‡ªåŠ¨ä¼˜åŒ–
- âœ… æ— éœ€æ‰‹åŠ¨å¹²é¢„ï¼Œå…¨è‡ªåŠ¨æ— ç¼ä½“éªŒ

æœ¬é…ç½®è¯´æ˜ï¼šæ–‡çŒ®åº“ã€Steam ä¸‹è½½èµ°ç›´è¿ï¼›LinkedIn ä½¿ç”¨æµ·å¤– DNSï¼Œé˜²æ­¢è·³è½¬å›å›½ï¼ˆDNS é…ç½®ä¿æŒä¸åŠ¨å³å¯ï¼‰ã€‚
ä½¿ç”¨å‰è¯·åœ¨ `proxy-providers` çš„ `url` å¡«å†™æœºåœºè®¢é˜…é“¾æ¥ã€‚

<div align="center">
  <img src="../figures/Direct_rules.png" width="80%" />
</div>

è‡ªå®šä¹‰ç›´è¿è§„åˆ™ï¼ˆå«å­¦æœ¯ç«™ç‚¹ï¼‰ï¼š
- è§„åˆ™ä»ä¸Šåˆ°ä¸‹åŒ¹é…ï¼Œè¶Šé å‰ä¼˜å…ˆ
- åœ¨ `rules` çš„ `# Custom` æˆ– `# æ–‡çŒ®åº“` åŒºåŸŸæ·»åŠ ç›´è¿è§„åˆ™ï¼Œä¾‹å¦‚ï¼š
  - `DOMAIN-SUFFIX,example.edu,DIRECT`
  - `DOMAIN,sub.example.edu,DIRECT`
  - `IP-CIDR,1.2.3.0/24,DIRECT,no-resolve`
- å¦‚éœ€èµ°ä»£ç†ï¼ŒæŠŠ `DIRECT` æ”¹ä¸º `ğŸš€ é»˜è®¤ä»£ç†` æˆ–å¯¹åº”æœåŠ¡åˆ†ç»„
- æ·»åŠ ååœ¨ OpenClash é‡Œé‡è½½é…ç½®


2. é«˜çº§ä½¿ç”¨æ–¹æ³•
è‡ªå®šä¹‰è§„åˆ™æ·»åŠ ï¼š

- [OpenClash ç»´æŠ¤æŒ‡å—.](https://blog.dreamtobe.cn/openclash_maintain/)
- [è‡ªå®šä¹‰ OpenClash è§„åˆ™.](https://github.com/Aethersailor/Custom_OpenClash_Rules) é…ç½®æˆåŠŸï¼
- [GitHub è®¿é—®ä¼˜åŒ–.](https://github.com/521xueweihan/GitHub520)
    - æ·»åŠ  GitHub ç›¸å…³åŸŸååˆ°ç›´è¿è§„åˆ™.
    - é€šè¿‡ä¿®æ”¹æœ¬åœ° hosts æ–‡ä»¶è§£å†³ GitHub è®¿é—®é€Ÿåº¦æ…¢å’Œå›¾ç‰‡æ˜¾ç¤ºä¸å‡ºæ¥çš„é—®é¢˜.

## å‚è€ƒèµ„æ–™
[https://www.youtube.com/watch?v=s84CWgKus4U&t=105s](https://www.youtube.com/watch?v=s84CWgKus4U&t=105s)


## å…¶ä»–ï¼š
- Openclashæ›´æ–°
![](../figures/Openclash_config/openclashUpdate.png)

- Openclashå¤‡ä»½
![](../figures/Openclash_config/openclashBackup.png)

---

<a id="english"></a>
[ğŸ‡¨ğŸ‡³ ä¸­æ–‡æ–‡æ¡£](#chinese) | [ğŸ‡ºğŸ‡¸ English](#english)

# OpenClash Network Access Configuration

> For specific configuration details, please refer to the YouTube video in the README documentation. When the author has time, a pre-configured firmware will be released directly.

## Network Access Configuration
> Honestly, isn't this what all the software router tinkering has been for?
> When you successfully configure network access and see all your home devices freely and quickly accessing the internet, that moment of satisfaction is absolutely the meaning of all this effort.

> Next, let's configure OpenClash and see how to make OpenWrt's software router truly "fly".

**1. Install Network Access Plugins such as OpenClash**

Download and add according to personal preference (cannot use multiple simultaneously!)
- OpenClash (Highly recommended, most widely used, this tutorial is based on it)
- passWall
- etc.

> After installing the OpenClash plugin, watch this video first and complete the basic configuration step by step:
Link: https://www.youtube.com/watch?v=1U9xkpexHOE

Unlike in the video, the `config.yaml` in the video has two issues in actual use: first, `LinkedIn` cannot be accessed normally, and second, `academic websites` like IEEE cannot correctly identify academic network IPs, requiring frequent network switching to download papers. The configuration provided in this article adjusts rules and DNS splitting to solve these issues and provides reproducible examples and verification steps.

Config file options (all in repo root):
- `config.yaml`: base version for customization
- `config_linkedin.yaml`: LinkedIn fix (DNS/rule exclusions)
- `config_linkedin_auto.yaml`: smart switch (auto failover groups based on the LinkedIn fix)
- `config_linkedin_auto_ssh22_redir.yaml`: SSH-22 fix variant (`redir-host`/Redir + `DST-PORT,22,DIRECT`)

Recommended: use [config_linkedin_auto.yaml](../config_linkedin_auto.yaml).
If GitHub SSH on port 22 is closed during handshake, switch to `redir-host` (or Redir), use [config_linkedin_auto_ssh22_redir.yaml](../config_linkedin_auto_ssh22_redir.yaml), and follow [GitHub SSH 22 troubleshooting notes](./en/GitHub_SSH_22_Port_Blocking.md).

Notes: Academic repositories and Steam downloads go direct; LinkedIn uses overseas DNS to prevent CN redirects (keep DNS unchanged).
Before use, set your subscription URL in `proxy-providers`.

<div align="center">
  <img src="../figures/Direct_rules.png" width="80%" />
</div>

Custom direct rules (including academic sites):
- Rules match top-to-bottom, earlier rules win
- Add direct rules in `rules` under `# Custom` or `# æ–‡çŒ®åº“`, e.g.:
  - `DOMAIN-SUFFIX,example.edu,DIRECT`
  - `DOMAIN,sub.example.edu,DIRECT`
  - `IP-CIDR,1.2.3.0/24,DIRECT,no-resolve`
- To proxy instead, replace `DIRECT` with `ğŸš€ é»˜è®¤ä»£ç†` or the target group
- Reload OpenClash after changes

**2. Advanced Usage**

Custom rule additions:

- [OpenClash Maintenance Guide](https://blog.dreamtobe.cn/openclash_maintain/)
- [Custom OpenClash Rules](https://github.com/Aethersailor/Custom_OpenClash_Rules) Configuration successful!
- [GitHub Access Optimization](https://github.com/521xueweihan/GitHub520)
    - Add GitHub-related domains to direct connection rules
    - Solve GitHub access speed and image display issues by modifying local hosts file

## References
[https://www.youtube.com/watch?v=s84CWgKus4U&t=105s](https://www.youtube.com/watch?v=s84CWgKus4U&t=105s)
